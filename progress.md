# Project Progress - 2026-03-01

## [2026-03-01 16:45] 계좌 히스토리 삭제 고도화 (스와이프, PIN 보안, 심리스 업데이트)

- **삭제 프로세스 보안 및 UX 개선**:
    - **iPhone 스타일 스와이프 삭제**: 개별 매수 기록을 스와이프하여 삭제 버튼을 노출하는 직관적인 모바일 인터랙션을 구현했습니다.
    - **4자리 PIN 보안 확인**: 삭제 시 랜덤 생성된 4자리 숫자를 입력해야 하는 보안 단계를 추가하고, 전용 커스텀 키패드 UI를 구축했습니다.
    - **UI 무중단 업데이트 (Seamless Update)**: `router.refresh()`와 부모 컨테이너(`SimpleModeV2Container`)의 상태 동기화 로직을 통해, 페이지 새로고침 없이 상세 시트 내에서 데이터와 수익률이 즉각 갱신되도록 개선했습니다.
- **데이터 안정성 및 오류 복구**:
    - **서버 액션 멱등성 확보**: `deleteStockEntry` 호출 시 이미 삭제된 레코드에 대한 예외 처리(P2025)를 추가하여 중복 클릭이나 네트워크 지연 상황에서도 안정적으로 작동하도록 보강했습니다.
    - **로딩 상태 시각화**: 삭제 진행 중 키패드 비활성화 및 로딩 스피너 노출을 통해 사용자 피드백을 강화했습니다.
- **디버깅 및 코드 정제**:
    - V2 컴포넌트 식별을 위한 알파벳 라벨([A]~[F])을 적용하고, 관련 TypeScript 린트 에러(프롭 누락 등)를 전면 수정했습니다.

## [2026-03-01 13:05] V2 모바일 자산 관리 강화 사항 복구 및 티커 검색 오류 수정

- **이전 거절(Reject)된 강화 사항 전면 복구**:
    - **자산 통합 로직**: 동일 종목의 여러 매수 건을 하나의 카드로 합산하여 보여주고, 가중 평균 평단가를 계산하는 로직을 `SimpleModeV2Container`에 재적용했습니다.
    - **자산 추가/삭제 기능**: V2 전용 자산 등록 폼(`StockEntryFormV2`)과 시트(`AssetEntrySheetV2`)를 복구하고, '자산 추가' 및 '자산 삭제' 버튼과 서버 액션(`deleteStockAssetAllEntries`)을 다시 활성화했습니다.
    - **한국어 로컬라이징**: 메인 대시보드 및 상세 분석 시트의 주요 영문 라벨을 한국어로 변경하고, 종목명 표시 시 `koreanNameMap`을 통한 한글 명칭 우선 노출 기능을 복구했습니다.
- **V2 자산 등록 티커 검색 오류 수정**:
    - **API 엔드포인트 교정**: 잘못 지정되었던 `/api/ticker-search` 호출 경로를 실제 서버 엔드포인트인 `/api/search`로 바로잡았습니다.
    - **데이터 필드 매핑 수정**: API 응답 필드명(`shortname`) 불일치 문제를 해결하여 검색 결과가 정상적으로 노출되도록 수정했습니다.
    - **검색 성능 최적화 (Debouncing)**: `use-debounce` 라이브러리를 적용하여 티커 입력 시 과도한 API 호출을 방지하고 사용자 경험을 개선했습니다.
- **코드 안정성 확보**:
    - `SimpleModeV2Container` 내 변수(`width`) 중복 선언 등 린트 에러를 해결하고 타입 정의를 보강했습니다.

## [2026-03-01 11:45] 모바일 연결 가이드(server 스킬) 신설 및 V2 UI 애니메이션/디렉션 고도화

- **모바일 접속 지원 'server' 스킬 추가**:
    - 외부 모바일 기기에서의 로컬 서버 접속을 돕는 전용 스킬(`server`)을 구축했습니다.
    - **동적 IP 조회**: `get-ip.sh` 스크립트를 통해 Mac의 현재 IP를 자동으로 추출하여 맞춤형 접속 가이드를 제공합니다.
    - **접속 가이드**: Wi-Fi 및 AP 모드(인터넷 공유)별 상세 연결 절차를 `SKILL.md`에 문서화했습니다.
- **마켓 위젯 UI 문구 및 디자인 정제**:
    - **직관적인 UX**: '+' 아이콘과 '자산 추가' 문구를 사용자 의도에 더 적합한 '관심종목 추가' 텍스트 버튼으로 변경했습니다.
    - **레이아웃 안정화**: 버튼 변경 과정에서 발생한 레이아웃 구조를 재정비하여 시각적 완성도를 높였습니다.
- **모달 종료 애니메이션(Exit Animation) 복구**:
    - **부드러운 전환**: 종목 상세 시트 및 자산 분석 시트가 닫힐 때 즉시 사라지던 버그를 수정하여 슬라이드 다운 애니메이션이 자연스럽게 연출되도록 개선했습니다.
    - **컴포넌트 생명주기 최적화**: 부모 컨테이너(`SimpleModeV2Container`)에서 시트를 상시 렌더링하도록 변경하고, 데이터 부재(Null) 상황에 대한 방어 로직을 추가하여 애니메이션 도중의 안정성을 확보했습니다.


## [2026-02-28 22:50] V2 UI 디버깅용 알파벳 라벨(A~F) 적용 및 코드 안정화

- **UI 디버깅 라벨링 시스템 도입**:
    - V2의 주요 컴포넌트에 식별용 알파벳 라벨([A]~[F])을 추가하여 기술적 디버깅 및 컴포넌트 식별을 용이하게 했습니다.
    - **라벨 매핑**: [A] 총 자산 카드, [B] 마켓 위젯 탭, [C] 뉴스 카드, [D] 주식 리스트, [E] 기타 자산 리스트, [F] 종목 상세 시트.
    - **디자인 조절**: 라벨의 투명도를 30%로 설정하여 가독성을 확보하면서도 실물 디자인에 방해되지 않도록 최적화했습니다.
- **코드 안정성 및 린트 에러 수정**:
    - `SimpleModeV2Card`에서 `StockDetailSheetV2`로 `totalNetWorth` 프롭이 누락되어 발생하던 TypeScript 린트 에러를 수정했습니다.
- **데이터 흐름 최적화**:
    - `AssetListGroupCard`가 `debugLabel` 프롭을 받아 동적으로 라벨을 렌더링할 수 있도록 구조를 개선했습니다.


## [2026-02-28 22:30] 자산 상세 페이지(#02) 고도화 및 개인 투자 성과 중심 UI 개편

- **자산 상세 페이지(#02) 레이아웃 재설계**:
    - 전체 자산을 '주식(STOCKS)'과 '기타(CASH & COMMODITIES)' 두 개의 대형 카드로 그룹화하여 가독성을 높였습니다.
    - `AssetListGroupCard`를 통해 각 종목을 메인 페이지의 관심 종목(Watchlist) 스타일로 렌더링하도록 통합했습니다.
- **주식 상세 헤더 개인화 및 인터랙티브 동기화**:
    - **개인 성과 중심**: 헤더에 시장가 대신 사용자님의 **평균 매입 단가**와 **전체 수익률(ROI%)**을 기본으로 표시하도록 변경했습니다.
    - **실시간 호버 동기화 (Hover-Sync)**: 차트 드래그 시 상단 가격이 해당 시점의 **실시간 시장가**로 즉시 전환되며, 가격 텍스트가 초록색(#38C798)으로 변하는 프리미엄 인터랙션을 구현했습니다.
- **자산 리스트 수익 중심 지표 전환**:
    - 리스트의 개별 종목 정보를 '현재가/등락률'에서 사용자님의 **'평가 손익 금액/평가 수익률'**로 전면 개편했습니다.
    - 수익 상태에 따라 빨간색(수익) 또는 초록색(손실)으로 컬러 테마를 통일하여 직관적인 성과 확인이 가능하게 했습니다.
- **안정성 강화 (무한 루프 수정)**:
    - 차트 호버 시 발생하던 'Maximum update depth exceeded' 에러를 해결하기 위해 `CustomTooltip` 내에 상태 업데이트 방어 로직(Equality Check)을 구현하여 시스템 안정성을 확보했습니다.


## [2026-02-28 16:38] 주식 1일(1D) 차트 휴장일 데이터 폴백(Fallback) 기능 구현

- **휴장일 자동 대응**: 
    - 1일 차트 조회 시 데이터가 없는 경우(주말, 공휴일 등) 자동으로 최근 5일 데이터를 검색하여 가장 최신 거래일의 데이터를 보여주도록 개선했습니다.
- **데이터 정밀도 유지**:
    - 폴백 로직에서도 15분 단위의 상세 분봉 데이터를 추출하여, 휴장일에도 장중 흐름을 정확하게 파악할 수 있도록 구현했습니다.
- **API 안정성 강화**:
    - `stock-history` 엔드포인트에서 데이터 부재 시의 예외 처리를 강화하고, 무의미한 빈 차트 대신 유의미한 마지막 트렌드를 제공하도록 로직을 보강했습니다.

## [2026-02-28 16:30] 주식 차트 시세 동기화 및 툴팁 버그 수정

- **실시간 헤더-차트 동기화**: 
    - `StockDetailSheetV2` 및 `MarketQuoteWidgetV2`에서 차트 위를 드래그할 때 상단의 큰 가격 수치가 실시간으로 연동되어 변하는 프리미엄 인터랙션을 구현했습니다.
- **통화 변환 및 가격 일원화**:
    - 미국 주식의 과거 시세 데이터(USD)에 실시간 환율을 적용하여, 차트의 모든 데이터 포인트가 화면상의 원화(₩) 가격과 일치하도록 로직을 고도화했습니다.
- **툴팁 데이터 오류 수정**:
    - `MarketQuoteWidgetV2`의 차트 툴팁에서 주가 대신 거래량이 표시되던 문제를 해결하여 정확한 시세 정보가 노출되도록 수정했습니다.
- **UI/UX 정교화**:
    - 드래그 위치를 명확히 보여주는 Active Dot을 추가하고, 상단 헤더에 현재 선택된 시점의 시간 정보를 함께 노출하여 정보 전달력을 높였습니다.
    - 불필요한 라이브러리 참조 에러를 정리하여 빌드 안정성을 확보했습니다.

## [2026-02-28 13:20] V2 자산 상세 분석 시트 및 프리미엄 차트 구현

- **V2 전용 자산 상세 시트(AssetGrowthDetailSheetV2) 신설**:
    - 대시보드의 '총 자산 현황' 카드 클릭 시 하단에서 부드럽게 올라오는 분석 시트를 구현했습니다.
    - **자산 증감 차트**: 30일간의 자산 변화 추이를 보여주는 영역 차트(Area Chart)를 추가했습니다. (현재는 더미 데이터 기반)
    - **자산 분류 도넛 차트**: 보유 자산(현금, 금, 주식)의 비중을 한눈에 파악할 수 있는 도넛 차트를 구현했습니다.
- **차트 렌더링 최적화 및 프리미엄 디자인**:
    - **안티앨리어싱(Anti-aliasing) 개선**: 차트 경계면의 자글거림(Jagged edges)을 해결하기 위해 SVG 스트로크 최적화 및 렌더링 파라미터를 조정하여 매끄러운 곡선을 구현했습니다.
    - **프리미엄 비주얼**: 각 차트 조각에 은은한 그라데이션을 적용하고, 중앙에 총 자산 합계 레이블을 배치하여 시각적 완성도를 높였습니다.
    - **인터랙티브 요소**: 차트 커스텀 툴팁 및 호버 효과를 통해 모바일에 최적화된 사용자 경험을 제공합니다.
- **V2 인터랙션 정교화**:
    - `SimpleModeV2Card` 컴포넌트에서 총 자산 카드 클릭 이벤트를 활성화하고 상세 시트와 연결했습니다.
    - 실수로 수정되었던 V1(`MobileDashboard.tsx`) 코드를 원복하여 코드베이스의 무결성을 유지하고 V2 전용 환경을 구축했습니다.

## [2026-02-28 12:55] 모바일 V2 UI 디자인 일관성 강화

- **액센트 컬러 통일**:
    - 페이지 이동 시 하위 페이지마다 바뀌던 액센트 컬러(초록, 빨강, 파랑)를 첫 페이지의 중립 테마로 통일했습니다.
    - **하단 인디케이터**: 활성화된 페이지 점의 색상을 모든 페이지에서 `zinc-900`(라이트) / `white`(다크)로 고정하여 시각적 피로도를 줄였습니다.
- **헤더 디자인 정제**:
    - 각 페이지 헤더의 배지(#02, #03, #04) 배경색을 중립 톤으로 변경했습니다.
    - 헤더 아이콘(PieChart, TrendingUp, Landmark)의 색상을 통일하여 페이지 전환 시에도 일관된 브랜드 아이덴티티를 유지하도록 개선했습니다.

## [2026-02-28 12:50] 데이터 일괄 관리(테스트 데이터) 기능 구현

- **벌크 데이터 관리 시스템 도입**:
    - 테스트 및 초기 설정을 위한 `bulkInsertTestData`와 `bulkDeleteTestData` 서버 액션을 구현했습니다.
    - 계좌, 자산, 주식 종목, 배당 내역, 메모 등 전체 스키마를 아우르는 정교한 테스트 데이터 셋을 구성했습니다.
- **UI 컨트롤 추가**:
    - V2 대시보드 상단에 **[데이터 입력]** 및 **[데이터 삭제]** 버튼을 배치하여 원클릭 관리 기능을 제공합니다.
    - 데이터 삭제 시 실수 방지를 위한 컨펌 대화상자를 적용하고, 로딩 상태를 직관적으로 표시하도록 개선했습니다.
- **안정성 및 디버깅 고도화**:
    - Prisma Client 재생성(`prisma generate`)을 통해 런타임 모델 동기화 문제를 해결했습니다.
    - 서버 액션 내에 런타임 모델 가드(Guard)와 상세 로깅을 추가하여 잠재적인 `undefined` 참조 에러를 원천 차단했습니다.
    - 데이터 조작 후 `revalidatePath` 및 자동 새로고침을 통해 즉각적인 UI 반영을 보장합니다.

- **뉴스 언어/출처별 필터링(국내/해외) 기능 도입**:
    - 뉴스 카드 상단에 '전체', '국내(한국어 기사)', '해외(영문 기사)' 필터 버튼을 추가했습니다.
    - 필터 기준을 주식 국적이 아닌 '기사의 언어 및 출처'로 개편하여, 국내 탭에서 미국 주식의 한글 뉴스를, 해외 탭에서 한국 주식의 영문 뉴스를 볼 수 있도록 개선했습니다.
    - 백엔드를 `yahooFinance.search` API로 전환하여 검색 신뢰도를 높이고 티커 포맷팅(.KS 등) 자동화 로직을 보강했습니다.

## [2026-02-28 11:15] 관심 종목 차트 고도화 및 UI 스타일 정교화
 
- **차트 로딩 및 데이터 밀도 개선**:
    - `yahooFinance.historical` 대신 `chart` 메서드를 도입하여 1일/1주 차트 로딩 문제를 해결했습니다.
    - 1년 차트 데이터 밀도를 일 단위(~250개)로 대폭 상향하여 정교한 곡선을 구현했습니다.
    - X축 라벨을 기간에 따라 시간 또는 날짜로 동적 전환하도록 개선했습니다.
- **실데이터 연동 스파크라인 도입**:
    - 리스트 내 미니 차트(Sparkline)가 가상 시뮬레이션이 아닌, 실제 24시간 가격 데이터를 백엔드(`stock-price` API)에서 가져와 렌더링하도록 고도화했습니다.
    - 데이터 정규화 로직을 통해 시장의 실제 흐름을 정확한 곡선으로 시각화하고, 은은한 그라데이션 채우기로 프리미엄 디자인을 완성했습니다.
    - **색상 체계 변경**: 상승(`FF3B2F`), 하락(`35C759`) 색상을 지정된 코드로 정교하게 조정했습니다.
    - **디자인 세부 수정**: 등락률 뱃지를 각진 형태로 다듬고, 가격 표시에서 통화 기호($)를 제거하여 숫자 중심의 깔끔한 레이아웃을 완성했습니다.
    - **시인성 강화**: 가격 텍스트 크기 상향 및 거래량 차트 투명도 조절로 정보 전달력을 높였습니다.

## [2026-02-28 10:48] 티커 검색 자동완성 엔드포인트 수정

- **API 엔드포인트 명칭 동기화**: 프론트엔드(`MarketQuoteWidgetV2.tsx`, `StockEntryForm.tsx`)에서 기대하는 `/api/search` 경로와 실제 서버 측 디렉토리명(`/api/ticker-search`) 사이의 불일치를 발견하여, 서버 측 디렉토리를 `src/app/api/search`로 변경하였습니다.
- **자동완성 기능 복구**: 엔드포인트 변경을 통해 자산 추가 시 종목명 및 티커 검색 결과가 자동완성 리스트에 정상적으로 노출되도록 수정했습니다.

## [2026-02-28 02:40] 종목 검색 구조 개편 및 한국어 종목명 폴백 시스템 구축

- **검색 API 백엔드 집중화**: 클라이언트 사이드의 `yahoo-finance2` 의존성을 제거하고, Next.js 내부 API(`/api/search`)를 신설하여 야후 파이낸스 검색 파라미터(`lang`, `region`, `quotesCount`)를 서버 단에서 엄격하게 제어하도록 개편했습니다.
- **이중 필터링 (Fallback Dictionary)**: `yahoo-finance2` API가 한국 주식을 영어로 반환하는 현상에 대비하여, 프론트엔드 단에 `koreanNameMap` 딕셔너리를 구축했습니다. API 응답의 `shortname`을 우선하되 매핑된 한글명이 있다면 이를 최종 렌더링하도록 2차 방어 로직을 적용했습니다.
- **프론트엔드 연동 고도화**: `StockEntryForm` 및 `MarketQuoteWidgetV2`에서 새로운 `/api/search` 엔드포인트를 호출하고 딕셔너리 매핑을 적용하도록 로직을 일원화하여, 삼성전자 등 국내 종목 및 주요 미국 주식의 한글명이 안정적으로 노출되도록 보장합니다.

## [2026-02-28 01:45] 실시간 관심 종목 시세 연동 및 뉴스 호출 안정화

- **실시간 시세 연동**: Yahoo Finance API를 통해 관심 종목의 실제 시장 가격(AAPL, NVDA, 삼성전자 등)을 가져오도록 구현했습니다. 한국 종목 티커 자동 서픽스(`.KS`) 처리 및 통합 매핑 로직을 추가했습니다.
- **수동 새로고침 추가**: 'MY종목' 위젯 상단에 새로고침 버튼을 추가하여 사용자가 원할 때 언제든 최신 시세를 반영할 수 있도록 개선했습니다.
- **뉴스 호출 하이드레이션 가드**: 페이지 로드 시 중복으로 발생하던 뉴스 API 호출을 방지하기 위해 `isHydrated` 가드와 쿼리 기반 데몬스를 도입하여 API 호출 횟수를 최소화했습니다.
- **UI/UX 안정화**: 데이터 복구 전 빈 화면이 노출되는 현상을 방지하고, 모든 시세와 뉴스가 상호 간섭 없이 부드럽게 로드되도록 워크플로우를 정비했습니다.

## [2026-02-28 01:40] 뉴스 로딩 최적화 및 UI 인터랙션 복구

- **API 호출 통합 최적화**: 8개 이상의 종목에 대해 개별적으로 발생하던 뉴스 요청을 단일 쿼리(OR 연산자 활용)로 통합하여 외부 API 호출 횟수를 1회로 단축함. 이를 통해 `429 Too Many Requests` 문제를 해결하고 로딩 속도를 향상시킴.
- **종목 매핑 로직 고도화**: 통합 검색 결과 내에서 제목이나 내용을 분석하여 해당 뉴스가 어떤 종목과 연관되어 있는지 식별하고 로고를 동적으로 매핑하는 로직을 구현함.
- **터치 이벤트 격리 복구**: 뉴스 상세 보기 시트에서 스크롤 및 터치 시 배경의 카로셀이 함께 움직이는 현상을 방지하기 위해 `stopPropagation` 핸들러를 다시 적용함.



## [2026-02-28 01:25] 바텀 시트 터치 이벤트 간섭(Leak) 방지 및 UI 안정화

- **메인 카드 드래그 제어**: 바텀 시트(자산 관리, 뉴스 상세 등)가 열려 있을 때 배경의 가로 슬라이드 드래그 기능이 동작하지 않도록 상태 기반(`isAnyModalOpen`) 제어 로직을 구현함.
- **이벤트 전파 차단**: 시트 내부의 터치 이벤트가 배경 컨테이너로 전달되어 의도치 않은 페이지 전환이 일어나는 현상을 막기 위해 `stopPropagation` 및 `onTouch` 핸들러를 보강함.
- **컴포넌트 간 통신 최적화**: `SimpleModeV2Container`와 하위 위젯 간의 콜백 구조를 개선하여 모달 상태를 효율적으로 동기화함.


## [2026-02-28 01:20] 관심 종목 상태 유지 및 뉴스 검색 범위 확장

- **관심 종목 순서 영속성(Persistence) 구현**:
    - `SimpleModeV2Container`에 `localStorage` 연동 로직을 추가하여, 사용자가 변경한 종목 순서가 페이지 새로고침 후에도 초기화되지 않고 유지되도록 개선함.
- **뉴스 피드 검색 범위 확장**:
    - `InvestmentNewsCardV2`의 뉴스 가져오기 로직에서 상위 4개 제한(`slice(0, 4)`)을 제거하여, 사용자의 관심 종목 리스트에 포함된 모든 종목에 대한 최신 뉴스를 수집하도록 확장함.


## [2026-02-28 01:15] 뉴스 썸네일 3단계(3-Tier) Fallback 시스템 구축

- **지능형 썸네일 렌더링 도입**:
    - **1순위 (원본)**: 뉴스에서 제공하는 고유 썸네일 노출.
    - **2순위 (공식 로고)**: 썸네일 부재 시 FMP(Financial Modeling Prep) API를 통해 기업 공식 로고를 자동으로 매칭하여 노출.
    - **3순위 (티커 박스)**: 로고 이미지마저 없을 경우, 해당 종목의 티커를 텍스트로 강조한 세련된 전용 박스 UI로 최종 대체.
- **오류 대응 로직 최적화**: `onError` 이벤트를 체이닝하여 이미지 로딩 실패 시 다음 단계로 즉시 전환되도록 구현했으며, 이를 뉴스 리스트와 상세 시트 모두에 적용함.


## [2026-02-28 01:00] V2 모바일 UI 안정화 및 마켓/뉴스 섹션 고도화

- **터치 인터랙션 안정화 (Flickering Fix)**:
    - `SimpleModeV2Container`의 스와이프 로직에 `dragDirectionLock` 및 `touchAction: pan-y`를 적용하여 수직 스크롤 시 발생하던 의도치 않은 가로 밀림(배경 노출) 현상을 해결함.
- **마켓 종목 위젯(MarketQuoteWidgetV2) 리뉴얼**:
    - 2열 그리드에서 1열 리스트 구조로 개편하여 현대적인 한국 증권 앱 스타일의 가공된 시세 정보를 제공함.
    - SVG 기반의 미니 스파크라인을 도입하여 각 종목의 가격 흐름을 시각화함.
    - 종목 상세 차트에 `Recharts` 라이브러리를 적용하여 볼륨 데이터와 함께 정교한 가격 트렌드를 표시함.
- **투자 뉴스 섹션(InvestmentNewsCardV2) 추가 및 UI 개선**:
    - 사용자의 관심 종목(MyStocks)과 연계된 실시간 구글 뉴스 피드를 대시보드 하단에 구현함.
    - **썸네일 예외 처리(Fallback) 강화**: 썸네일 부재 시 단순 아이콘 대신 연회색 박스에 해당 종목의 `ticker`를 크게 표시하여 가독성 및 디자인 일관성을 확보함.
    - 바텀 시트 형태의 상세 뉴스 보기 기능을 추가하여 외부 브라우저 이동 없이 콘텐츠 확인이 가능하게 함.
- **자산 관리 UI 일관성 강화**:
    - 자산 추가/삭제를 위한 전 전 전용 관리 시트를 연동하고, 프리미엄 톤앤매너에 맞게 시각 요소(아이콘, 컬러)를 정제함.


## [2026-02-27 23:45] V2 마켓 위젯 1열 리스트 개편 및 자산 관리 UI 고도화

- **1열 세로 리스트(1-Column List) 개편**: 기존 2열 그리드 구조를 현대적인 한국 증권 앱 스타일의 1열 리스트로 전면 재설계함.
    - **가독성 중심 레이아웃**: 좌측(티커/이름), 중앙(스파크라인), 우측(가격/등락률 뱃지)의 3분할 구조 적용.
    - **미니 스파크라인(Sparkline)**: SVG 기반의 동적 미니 차트를 구현하여 종목별 가격 흐름을 한눈에 파악 가능하게 함.
    - **뱃지 스타일 등락률**: 등락률을 뱃지 형태로 디자인하고 한국형 컬러 표준(상승-Red, 하락-Blue)을 적용함.
- **바텀 시트(Bottom Sheet) 자산 관리**: 중앙 팝업 대신 하단에서 올라오는 바텀 시트 구조로 전환하여 모바일 최적화 및 연속적인 추가/삭제 UX 구현.
- **검색 API 안정화**:
    - **로컬라이징 시도 및 수정**: 한국 종목명 출력을 위한 `lang`/`region` 파라미터 적용 시 발생하는 API 스키마 검증 오류를 확인하고, 안정성을 위해 해당 파라미터를 제거하되 결과 개수를 늘려 우회적으로 보완함.
    - **검토 범위 확대**: 내부 검색 API를 수정하여 주식, ETF뿐만 아니라 지수(Index)와 환율(Currency)까지 검색되도록 확장함.
- **인터랙션 및 시각 요소 정제**:
    - **애니메이션 최적화**: 불필요한 레이아웃 애니메이션을 제거하고 150ms 이하의 즉각적인 반응을 통해 조작감을 크게 개선함.
    - **컬러 톤 정리**: 자산 관리 UI의 자극적인 빨간색 요소를 차분한 무채색 계열로 조정하여 프리미엄 톤앤매너를 강화함.


## [2026-02-27 20:15] ETFCheck 스타일의 프리미엄 V2 모바일 UI 구현 및 스와이프 인터랙션 최적화

- **V2 병렬 UI 구축**: 기존 시스템에 영향을 주지 않는 독립적인 `/m/v2` 경로와 전용 컴포넌트(`SimpleModeV2Container`, `SimpleModeV2Card`, `NewsSectionV2`) 및 스타일 체계를 완성함.
- **네이버 앱 스타일 스와이프 구현**: `framer-motion`을 활용하여 두 개 이상의 페이지를 가로로 넘길 수 있는 고성능 스와이프 인터페이스를 구축함.
- **피지컬 스와이프 인터랙션 튜닝**:
    - **관성 및 스냅**: 가볍게 튕기면(Flick) 관성에 따라 스르륵 미끄러지고, 멈출 때는 목적지 페이지로 자석처럼 착 달라붙는(Snap) 완벽한 물리 효과 적용.
    - **2/3 임계값**: 화면의 2/3 이상 드래그 시에만 페이지가 전환되도록 설정하여 의도치 않은 조작 방지.
    - **바운스 효과 (Bounce)**: 페이지 끝 도달 및 복귀 시 실제 물체와 같은 탄성 애니메이션 추가.
- **터치 좌표 미스매치 및 하이재킹 해결**: 비활성 페이지에 `pointer-events-none`을 적용하고 픽셀 기반 절대 좌표 로직을 사용하여 터치 포인트와 렌더링 위치가 어긋나는 버그를 수정함.
- **뉴스 섹션 연동**: 대시보드 하단에 실시간 뉴스 피드 레이아웃을 구현하고 프리미엄 카드 스타일을 적용함.


## [2026-02-27 16:11] FluxX PWA (Progressive Web App) 전환 완료

- **PWA 기본 구성**: `manifest.json` 생성 및 서비스 워커(`sw.js`) 연동을 통해 모바일 설치 기반 마련.
- **전용 앱 아이콘**: 프리미엄 "FX" 심볼 기반의 다양한 해상도 아이콘(512px, 192px, Apple Touch Icon) 생성 및 적용.
- **모바일 최적화**: iOS 홈 화면 추가 대응 메타태그(StatusBar, WebApp Capable) 및 Viewport 고정 설정.
- **오프라인 캐싱**: 서비스 워커를 통한 핵심 자산(폰트, manifest, 아이콘) 로컬 캐싱으로 로딩 속도 및 오프라인 접근성 개선.
- **심플 모드 진입점**: 앱 설치 후 실행 시 바로 심플 모드(`/m/simple`)로 연결되도록 설정.


- **티커 계층 개선**: 티커 코드를 `text-2xl font-black`으로 크게, 보유 수량을 소형 보조 텍스트로 표기하여 정보 계층 명확화.
- **USD/KRW 병기**: 해외 주식 카드에 원화 환산 금액 아래 달러 원가(`$330,230`) 보조 표기 추가. 등락률 배지 내 `(USD)` 라벨 제거.
- **구분선(Rule) 추가**: 티커 정보와 가격 정보 사이에 반투명 1px 구분선 삽입. 위치를 티커 쪽에 가깝게 배치(mb-2/mb-4 비율).
- **보조 텍스트 가시성 개선**: 어두운 카드에서 보조 텍스트 불투명도를 white/60, white/50으로 상향.
- **스크롤 여백 확대**: 하단 pb-24 → pb-40으로 늘려 마지막 카드 잘림 방지.
- **하단 페이드 그라데이션 제거**: 사용자 요청으로 하단 뿌연 오버레이 완전 제거.


- **StockDetailSheet 신규 컴포넌트**: 주식 티커 카드 탭 시 하단에서 슬라이드업되는 상세 Sheet 구현.
- **표시 정보**: 평가 금액, 미실현 손익/수익률, 평단가(USD/KRW 대응), 현재가, 계좌별 보유 수량 및 개별 수익률.
- **스와이프 다운 제거**: 사용 경험이 어색하여 framer-motion 커스텀 드로어를 Radix UI 표준 Sheet로 교체.
- **SimpleModeCard 업데이트**: 주식 카드 클릭 시 `StockDetailSheet`를, 총 자산 카드 클릭 시 `AssetBreakdownSheet`를 열도록 분기 처리.


- **전체 자산 상세 시트 (AssetBreakdownSheet)**: 총 자산 카드 클릭 시 하단에서 슬라이드업되는 자산 상세 내역 시트를 구현. 원화/달러/금/한국주식/해외주식 구분 표시.
- **시트 테마 통일 (White)**: 자산 상세 시트의 배경색을 앱 설정 창과 동일한 순백색(`bg-white`)으로 통일하여 시스템 디자인 일관성 확보.
- **카테고리 아이콘 심플화**: 원색 배경 아이콘을 제거하고 `zinc-50`/`zinc-500` 계열의 차분하고 세련된 모노크롬 스타일로 교체.
- **배경 테마 설정**: 심플 모드에 3가지 배경 테마(Premium Dark, White Silk, Midnight Blue) 선택 기능 추가. 선택 결과가 `localStorage`에 저장되어 영구 유지됨.
- **헤더 겹침 수정 (Safe Area)**: 고정 헤더 아래 여백이 부족하여 "심플 모드" 타이틀이 가려지던 문제를 `env(safe-area-inset-top)` + 80px 패딩으로 해결.
- **설정창 스크롤 및 이벤트 버블링 수정**: 설정창 내부 스크롤 활성화 및 클릭 이벤트 하위 레이어 전파(bubbling) 방지 처리.

- **자동 텍스트 명암비 로직 (YIQ)**: 배경색의 밝기를 수학적으로 계산하여 텍스트 색상을 자동으로 결정하는 로직을 도입함. 중간 톤 색상에서도 최적의 가독성을 보장하도록 개선함.
- **카드 UI 불필요 요소 정리**: 카드 하단의 '보안 실시간 동기화' 문구와 애니메이션을 제거하여 디자인을 더 깔끔하고 현대적으로 정돈함.
- **가시성 강화**: '통합 포트폴리오' 타이틀의 글자색과 투명도를 조정하여 핵심 정보에 대한 주목도를 높임.
- **인터랙션 정교화**: 3초 롱 프레스 트리거 시 설정창(`Sheet`)이 열리지 않도록 클릭 이벤트 차단 플래그를 적용하여 사용자 경험을 선명하게 다듬음.

## [2026-02-27] 모바일 심플 모드 자산 위치 변경 및 인터랙션 고도화
- **카드 위치 변경 (드래그 앤 드롭)**: `framer-motion`을 도입하여 모바일에서 부드럽게 작동하는 자산 카드 순서 변경 기능을 구현함. 변경된 순서는 `localStorage`에 저장되어 영구적으로 유지됨.
- **정교한 롱 프레스 트리거**: 실수로 카드가 이동하는 것을 방지하기 위해 설정 버튼을 3초간 누를 때만 편집 모드에 진입하도록 트리거 로직을 개선함.
- **Floating 애니메이션 적용**: 편집 모드 진입 시 기존의 흔들림 효과 대신 카드가 살짝 공중에 떠오르는(Floating) 효과를 적용하여 시각적 안정감과 프리미엄한 느낌을 강화함.
- **인터랙션 버그 수정**: 3초 롱 프레스 후 손을 뗐을 때 테마 설정창(`Sheet`)이 의도치 않게 열리는 현상을 클릭 이벤트 차단 로직을 통해 해결함.
- **컨텍스트 효율화 스킬 추가**: 새로운 세션 시작 시 `progress.md`를 읽어 즉시 맥락을 파악할 수 있는 `load` 스킬을 개발 및 등록하여 컨텍스트 쿼터 절약을 도모함.
- **환경 설정 워크플로우 보강**: 개발 환경 구축을 위한 `/setup-env` 워크플로우를 `.agents/workflows`로 이동 및 최적화함.

## [2026-02-27] 모바일 심플 모드 구현 및 UI 고도화
- **심플 모드 메뉴 및 페이지 구축**: 모바일 하단 네비게이션에 '심플 모드' 메뉴를 추가하고, 전용 페이지(`/m/simple`)를 생성하여 자산 현황을 한눈에 볼 수 있는 UI를 구현함.
- **이미지 기반 카드 UI 개선**: 사용자가 제공한 뱅킹 앱 디자인을 모티브로 라운딩(`rounded-[32px]`), 폰트 스타일, 차분한 컬러 팔레트 등을 적용하여 프리미엄한 카드 UI를 완성함.
- **가독성 최적화 (Pretendard 도입)**: 한글 가독성을 극대화하기 위해 'Pretendard' 가변 폰트를 전역에 적용하고, 카드 배경색의 밝기에 따라 텍스트 색상을 자동으로 흑/백 전환하는 로직을 구현함.
- **실시간 데이터 연동**: 첫 번째 카드에 사용자 총 자산 가치를, 이어지는 카드들에 보유 주식별 수량, 티커, 로고 심볼 및 실시간 등락률을 원화(KRW) 환산 가치와 함께 표시함.
- **사용자 설정 영속성**: `localStorage`를 연동하여 사용자가 카드별로 지정한 배경색 테마가 새로고침 후에도 유지되도록 구현함.
- **신규 스킬 추가**: 전체 스킬 목록과 설명을 보여주는 `list` 스킬을 개발 및 등록함.

## [2026-02-27] 초기 환경 설정 및 스킬 등록

- **모바일 접속 환경 구축**: 마우스나 키보드 없이 모바일 기기에서 접속 가능하도록 `package.json`에 `dev:mobile` 스크립트(`-H 0.0.0.0`) 추가 및 `.env.mobile` 설정.
- **문서화**: Mac의 인터넷 공유(AP) 모드를 사용하여 접속하는 방법을 `docs/MOBILE_CONNECTION.md`에 상세히 가이드.
- **커밋 자동화 스킬**: `progress.md` 업데이트와 Git 커밋/푸시를 한 번에 처리하는 `commit` 스킬 개발 및 등록.

